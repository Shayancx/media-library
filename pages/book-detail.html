<section x-data="bookDetail" x-init="init()" x-transition:enter.opacity.duration.200ms>
  <div class="book-detail" x-show="book">
    <div class="book-actions">
      <button @click="$root.navigate('books')" class="action-btn">
        ‚Üê back to library
      </button>
    </div>

    <div class="book-detail-content">
      <div class="book-detail-main">
        <div class="book-detail-cover">
          <img :src="book?.cover || 'assets/covers/default.jpg'" :alt="book?.title + ' cover'">
        </div>
        
        <div class="book-detail-info">
          <h1 class="book-detail-title" x-text="book?.title"></h1>
          <p class="book-detail-author">by <span x-text="book?.author"></span></p>
          
          <div class="book-info-table">
            <div class="info-row">
              <span class="info-label">ISBN:</span>
              <span class="info-value" x-text="book?.isbn || 'N/A'"></span>
            </div>
            <div class="info-row">
              <span class="info-label">Publisher:</span>
              <span class="info-value" x-text="book?.publisher || 'Unknown'"></span>
            </div>
            <div class="info-row">
              <span class="info-label">Year:</span>
              <span class="info-value" x-text="book?.year"></span>
            </div>
            <div class="info-row">
              <span class="info-label">Pages:</span>
              <span class="info-value" x-text="book?.pages || 'N/A'"></span>
            </div>
            <div class="info-row">
              <span class="info-label">Language:</span>
              <span class="info-value" x-text="getLanguageName(book?.language)"></span>
            </div>
            <div class="info-row">
              <span class="info-label">Genre:</span>
              <span class="info-value" x-text="book?.genre"></span>
            </div>
          </div>
          
          <!-- Download Section -->
          <div class="download-section">
            <h3 class="download-title">Download Options</h3>
            <div class="download-buttons">
              <template x-for="format in book?.formats || []" :key="format">
                <button @click="downloadBook(book.id, format)" 
                        class="download-btn"
                        :class="'format-' + format">
                  <span class="format-icon" x-text="format === 'epub' ? 'üìñ' : 'üìÑ'"></span>
                  <span x-text="format.toUpperCase()"></span>
                  <span class="file-size" x-text="'(' + formatFileSize(book.size) + ')'"></span>
                </button>
              </template>
            </div>
          </div>
        </div>
      </div>
      
      <div class="book-description" x-show="book?.description">
        <h3>Description</h3>
        <p x-text="book?.description"></p>
      </div>
      
      <!-- Similar Books -->
      <div class="similar-section" x-show="similarBooks.length > 0">
        <h3 class="similar-title">Similar Books</h3>
        <div class="books-carousel">
          <template x-for="similarBook in similarBooks" :key="similarBook.id">
            <div class="carousel-book" @click="$root.openBook(similarBook)">
              <img :src="similarBook.cover || 'assets/covers/default.jpg'" :alt="similarBook.title">
              <p class="carousel-book-title" x-text="similarBook.title"></p>
              <p class="carousel-book-author" x-text="similarBook.author"></p>
            </div>
          </template>
        </div>
      </div>
    </div>
  </div>
</section>
