<section x-data="booksLibrary" x-init="init()" x-transition:enter.opacity.duration.200ms>
  <div class="page-header">
    <h1 class="page-title">Digital Library</h1>
    <p class="page-subtitle">Browse and download books</p>
  </div>
  
  <!-- Search and Filters -->
  <div class="library-controls">
    <div class="search-section">
      <input type="text" 
             x-model="search" 
             placeholder="Search books by title, author, ISBN..."
             class="search-input"
             @input="filterBooks">
    </div>
    
    <div class="filter-section">
      <div class="filter-group">
        <label class="filter-label">Genre:</label>
        <select x-model="filters.genre" @change="filterBooks" class="filter-select">
          <option value="">All Genres</option>
          <template x-for="genre in availableGenres" :key="genre">
            <option :value="genre" x-text="genre"></option>
          </template>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Format:</label>
        <select x-model="filters.format" @change="filterBooks" class="filter-select">
          <option value="">All Formats</option>
          <option value="epub">EPUB</option>
          <option value="pdf">PDF</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Language:</label>
        <select x-model="filters.language" @change="filterBooks" class="filter-select">
          <option value="">All Languages</option>
          <option value="en">English</option>
          <option value="es">Spanish</option>
          <option value="fr">French</option>
          <option value="de">German</option>
        </select>
      </div>
      
      <button @click="clearFilters" class="clear-filters-btn" x-show="hasActiveFilters">
        Clear Filters
      </button>
    </div>
  </div>
  
  <!-- Results Summary -->
  <div class="results-summary">
    <span>Found <strong x-text="filteredBooks.length"></strong> books</span>
    <span x-show="hasActiveFilters" class="filter-status">
      (filtered from <span x-text="books.length"></span> total)
    </span>
  </div>
  
  <!-- Books Grid -->
  <div class="books-grid">
    <template x-for="book in paginatedBooks" :key="book.id">
      <article class="book-card" @click="$root.openBook(book)">
        <div class="book-cover">
          <img :src="book.cover || 'assets/covers/default.jpg'" :alt="book.title + ' cover'">
          <div class="book-formats">
            <template x-for="format in book.formats" :key="format">
              <span class="format-badge" x-text="format.toUpperCase()"></span>
            </template>
          </div>
        </div>
        <div class="book-info">
          <h3 class="book-title" x-text="book.title"></h3>
          <p class="book-author" x-text="book.author"></p>
          <div class="book-meta">
            <span class="book-year" x-text="book.year"></span>
            <span class="book-size" x-text="formatFileSize(book.size)"></span>
          </div>
          <div class="book-tags">
            <span class="tag small" x-text="book.genre"></span>
            <span class="tag small" x-text="book.language"></span>
          </div>
        </div>
      </article>
    </template>
  </div>
  
  <!-- Pagination -->
  <div class="pagination" x-show="totalPages > 1">
    <button @click="currentPage--" 
            :disabled="currentPage === 1"
            class="page-btn">
      ← prev
    </button>
    <span class="page-info">
      page <span x-text="currentPage"></span> of <span x-text="totalPages"></span>
    </span>
    <button @click="currentPage++" 
            :disabled="currentPage === totalPages"
            class="page-btn">
      next →
    </button>
  </div>
</section>
